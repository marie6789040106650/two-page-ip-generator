# 🌐 工作区端口分配表

## 📋 固定端口分配

| 工作区 | 端口 | 服务类型 | 启动命令 |
|--------|------|----------|----------|
| workspace-1-ui-form | 3001 | 前端页面 | `npm run dev` |
| workspace-2-api-content | 3002 | API服务 | `npm run dev` |
| workspace-3-html-rendering | 3003 | 前端页面 | `npm run dev` |
| workspace-4-html-export | 3004 | API服务 | `npm run dev` |

## ⚠️ 重要提醒

### 给每个工作区的Kiro：
**在启动开发服务器之前，请先检查你的端口配置！**

1. **检查package.json中的dev脚本**
2. **确认next.config.js中的端口设置**
3. **如果端口被占用，不要随意更改端口号**

### 端口冲突处理步骤：

#### 1. 检查端口占用
```bash
# 检查端口是否被占用
lsof -i :3001  # 工作区1
lsof -i :3002  # 工作区2
lsof -i :3003  # 工作区3
lsof -i :3004  # 工作区4
```

#### 2. 如果端口被其他工作区占用
```bash
# 停止占用端口的进程
kill -9 <PID>

# 或者使用我们的停止脚本
../stop-all-workspaces.sh
```

#### 3. 协调启动顺序
建议按以下顺序启动：
1. 工作区2 (API服务) - 端口3002
2. 工作区1 (表单页面) - 端口3001
3. 工作区3 (渲染页面) - 端口3003
4. 工作区4 (导出服务) - 端口3004

## 🚨 给Kiro的明确指令

### 启动前检查清单：
- [ ] 确认我的工作区应该使用的端口号
- [ ] 检查端口是否被占用
- [ ] 如果被占用，先停止占用进程
- [ ] 使用正确的端口启动服务

### 如果遇到端口冲突：
1. **不要随意更改端口号**
2. **先检查是否有其他工作区在使用**
3. **使用 `../stop-all-workspaces.sh` 停止所有服务**
4. **按照协调顺序重新启动**

## 📞 协调机制

如果端口冲突无法解决，请在你的工作区中说：
```
"端口[XXXX]被占用，请协调其他工作区停止服务，或者告诉我正确的启动顺序。"
```